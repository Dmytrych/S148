FROM node:20

WORKDIR /usr/src/app

COPY package.json ./
COPY package-lock.json ./
RUN npm install

COPY . .

ARG NEXT_PUBLIC_BACK_END_URL
ARG NEXT_PUBLIC_IMAGE_PROVIDER_URL
ARG NEXT_PUBLIC_IMAGE_PROVIDER_DOMAIN
ARG NEXT_PUBLIC_EMAIL
ARG NEXT_PUBLIC_PHONE_NUMBER
ARG NEXT_PUBLIC_PHONE_NUMBER_FOR_URL
ARG NEXT_PUBLIC_FACEBOOK_LINK
ARG NEXT_PUBLIC_INSTAGRAM_LINK
ARG NEXT_PUBLIC_TELEGRAM_LINK
ARG NEXT_PUBLIC_COPYRIGHT
ARG NEXT_PUBLIC_HOST_NAME

ENV NEXT_PUBLIC_BACK_END_URL=$NEXT_PUBLIC_BACK_END_URL
ENV NEXT_PUBLIC_IMAGE_PROVIDER_URL=$NEXT_PUBLIC_IMAGE_PROVIDER_URL
ENV NEXT_PUBLIC_IMAGE_PROVIDER_DOMAIN=$NEXT_PUBLIC_IMAGE_PROVIDER_DOMAIN
ENV NEXT_PUBLIC_EMAIL=$NEXT_PUBLIC_EMAIL
ENV NEXT_PUBLIC_PHONE_NUMBER=$NEXT_PUBLIC_PHONE_NUMBER
ENV NEXT_PUBLIC_PHONE_NUMBER_FOR_URL=$NEXT_PUBLIC_PHONE_NUMBER_FOR_URL
ENV NEXT_PUBLIC_FACEBOOK_LINK=$NEXT_PUBLIC_FACEBOOK_LINK
ENV NEXT_PUBLIC_INSTAGRAM_LINK=$NEXT_PUBLIC_INSTAGRAM_LINK
ENV NEXT_PUBLIC_TELEGRAM_LINK=$NEXT_PUBLIC_TELEGRAM_LINK
ENV NEXT_PUBLIC_COPYRIGHT=$NEXT_PUBLIC_COPYRIGHT
ENV NEXT_PUBLIC_HOST_NAME=$NEXT_PUBLIC_HOST_NAME

RUN npm run build

EXPOSE 3000

CMD ["npm", "start"]
